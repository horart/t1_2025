<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - HR –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/userlk.css') }}">
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-container">
            <div class="logo">HR –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</div>
            <nav class="nav" id="nav">
                <ul>
                    <li><a href="/hremployees" class="active">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</a></li>
                    <li><a href="/projects">–ü—Ä–æ–µ–∫—Ç—ã</a></li>
                    <li><a href="/hrdashboard">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a></li>
                    <li><a href="/hrchat">–ò–ò –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main class="main-container">
        <div class="profile-header-section">
            <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
            <button class="edit-button" id="editProfileBtn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>

        <div class="profile-content">
            <!-- –ë–ª–æ–∫ —Å –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π -->
            <section class="profile-card">
                <div class="profile-header">
                    <div class="avatar">

                        <img src="{{ url_for('static', filename='img/profile.png') }}" alt="–ê–≤–∞—Ç–∞—Ä">
                    </div>
                    <div class="profile-info">
                        <h2>{{this_worker["name"]}}</h2>
                        <p class="position">{{this_worker["position"]}}</p>
                    </div>
                </div>

                <div class="profile-details">
                    <div class="detail-item">
                        <span class="detail-label">–§–∏–ª–∏–∞–ª:</span>
                        <span class="detail-value">–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª T1</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">–ü—Ä–æ–µ–∫—Ç:</span>
                        <span class="detail-value">{{this_worker["projects"][-1]["name"]}}</span>
                    </div>
                </div>
            </section>

            <!-- –ë–ª–æ–∫ —Å–æ —Å—Ç–µ–∫–æ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π -->
            <section class="profile-card">
                <h3>–°—Ç–µ–∫:</h3>
                <div class="tech-stack">
                    {%for skill in skills%}
                        <span class="tech-tag">{{skill["name"]}}: {{skill["value"]}}</span>
                    {%endfor%}

                </div>
            </section>

            <!-- –ë–ª–æ–∫ —Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å—é –∫ –ø–µ—Ä–µ–µ–∑–¥—É -->
            <section class="profile-card">
                <h3>–ì–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ–µ–∑–¥—É</h3>
                <div class="relocation-status">
                    <span class="status-indicator active"></span>
                    <span class="status-text">–î–∞, –≥–æ—Ç–æ–≤ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</span>
                </div>
            </section>

            <!-- –ë–ª–æ–∫ "–û —Å–µ–±–µ"
            <section class="profile-card">
                <h3>–û —Å–µ–±–µ:</h3>
                <div class="about-me">
                    <p>–í–µ—Å—ë–ª—ã–π –∏ –∫–ª–∞—Å—Å–Ω—ã–π, 24 –µ—â—ë –∂–∏–≤. –£–≤–ª–µ–∫–∞—é—Å—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π, –∏–∑—É—á–∞—é –Ω–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —É—á–∞—Å—Ç–≤—É—é –≤ —Ö–∞–∫–∞—Ç–æ–Ω–∞—Ö. –õ—é–±–ª—é —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –∫–æ–º–∞–Ω–¥–Ω—É—é —Ä–∞–±–æ—Ç—É.</p>
                </div>
            </section>-->

            <!-- –ë–ª–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ -->
            <section class="profile-card">
                <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <span class="contact-icon">üìß</span>
                        <span>vanyok.bromov@t1.com</span>
                    </div>
                    <div class="contact-item">
                        <span class="contact-icon">üì±</span>
                        <span>+7 (999) 123-45-67</span>
                    </div>
                    <div class="contact-item">
                        <span class="contact-icon">üíº</span>
                        <span>@vanyok_bromov</span>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</h2>
                <button class="close-button" id="closeModalBtn">&times;</button>
            </div>
            <form id="profileForm" class="profile-form">
                <div class="form-group">
                    <label for="fullName">–§–ò–û</label>
                    <input type="text" id="fullName" name="fullName" value="–í–∞–Ω—ë–∫ –ë—Ä–æ–º–æ–≤" required>
                </div>

                <div class="form-group">
                    <label for="birthdate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                    <input type="date" id="birthdate" name="birthdate" value="2000-12-12" required>
                </div>

                <div class="form-group">
                    <label for="position">–î–æ–ª–∂–Ω–æ—Å—Ç—å</label>
                    <input type="text" id="position" name="position" value="Middle Frontend" required>
                </div>

                <div class="form-group">
                    <label for="branch">–§–∏–ª–∏–∞–ª</label>
                    <select id="branch" name="branch" required>
                        <option value="–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª T1" selected>–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª T1</option>
                        <option value="–ú–æ—Å–∫–æ–≤—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª T1">–ú–æ—Å–∫–æ–≤—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª T1</option>
                        <option value="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª T1">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª T1</option>
                        <option value="–ö–∞–∑–∞–Ω—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª T1">–ö–∞–∑–∞–Ω—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª T1</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="department">–ü—Ä–æ–µ–∫—Ç</label>
                    <input type="text" id="department" name="department" value="–û—Ç–¥–µ–ª DION" required>
                </div>

                <div class="form-group">
                    <label for="techStack">–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
                    <textarea id="techStack" name="techStack" rows="3">–ü–∏—Ç–æ–Ω, C++, SQL, JavaScript, HTML/CSS, React</textarea>
                </div>

                <div class="form-group">
                    <label for="relocation">–ì–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ–µ–∑–¥—É</label>
                    <select id="relocation" name="relocation" required>
                        <option value="yes" selected>–î–∞</option>
                        <option value="no">–ù–µ—Ç</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="about">–û —Å–µ–±–µ</label>
                    <textarea id="about" name="about" rows="4">–í–µ—Å—ë–ª—ã–π –∏ –∫–ª–∞—Å—Å–Ω—ã–π, 24 –µ—â—ë –∂–∏–≤. –£–≤–ª–µ–∫–∞—é—Å—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π, –∏–∑—É—á–∞—é –Ω–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —É—á–∞—Å—Ç–≤—É—é –≤ —Ö–∞–∫–∞—Ç–æ–Ω–∞—Ö. –õ—é–±–ª—é —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –∫–æ–º–∞–Ω–¥–Ω—É—é —Ä–∞–±–æ—Ç—É.</textarea>
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" value="vanyok.bromov@t1.com" required>
                </div>

                <div class="form-group">
                    <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" id="phone" name="phone" value="+7 (999) 123-45-67" required>
                </div>

                <div class="form-group">
                    <label for="social">–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</label>
                    <input type="text" id="social" name="social" value="@vanyok_bromov">
                </div>

                <div class="form-actions">
                    <button type="button" class="cancel-button" id="cancelFormBtn">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="save-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
        document.addEventListener('DOMContentLoaded', function() {
            const editProfileBtn = document.getElementById('editProfileBtn');
            const modalOverlay = document.getElementById('modalOverlay');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const cancelFormBtn = document.getElementById('cancelFormBtn');
            const profileForm = document.getElementById('profileForm');

            // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            editProfileBtn.addEventListener('click', function() {
                modalOverlay.classList.add('active');
                document.body.style.overflow = 'hidden'; // –ó–∞–ø—Ä–µ—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Ñ–æ–Ω–∞
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            function closeModal() {
                modalOverlay.classList.remove('active');
                document.body.style.overflow = ''; // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É
            }

            closeModalBtn.addEventListener('click', closeModal);
            cancelFormBtn.addEventListener('click', closeModal);

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modalOverlay.addEventListener('click', function(e) {
                if (e.target === modalOverlay) {
                    closeModal();
                }
            });

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
            profileForm.addEventListener('submit', function(e) {
                e.preventDefault();

                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç AJAX-–∑–∞–ø—Ä–æ—Å

                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
                const formData = new FormData(profileForm);
                const data = Object.fromEntries(formData);

                console.log('–î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏:', data);

                // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                setTimeout(() => {
                    alert('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
                    closeModal();

                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                    // –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
                }, 1000);
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∞–≤–∏—à–µ Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modalOverlay.classList.contains('active')) {
                    closeModal();
                }
            });

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–∞–º–±—É—Ä–≥–µ—Ä-–º–µ–Ω—é
            const hamburger = document.getElementById('hamburger');
            const nav = document.getElementById('nav');

            if (hamburger && nav) {
                hamburger.addEventListener('click', function() {
                    hamburger.classList.toggle('active');
                    nav.classList.toggle('active');
                });

                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ –æ–±–ª–∞—Å—Ç–∏
                document.addEventListener('click', function(event) {
                    const isClickInsideNav = nav.contains(event.target);
                    const isClickInsideHamburger = hamburger.contains(event.target);

                    if (!isClickInsideNav && !isClickInsideHamburger && nav.classList.contains('active')) {
                        hamburger.classList.remove('active');
                        nav.classList.remove('active');
                    }
                });
            }
        });
    </script>
</body>
</html>